"use strict";var app=angular.module("massiveWallhackApp",["ngResource","ngRoute","ui.bootstrap"]);app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),app.config(["$httpProvider",function(a){a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"]}]);var app=angular.module("massiveWallhackApp");app.controller("MainCtrl",["$scope","Courses","Uuid","Calendar",function(a,b,c,d){a.events={},a.eventKeys=[],a.uuid=c.generate(),a.calLink=d.getLink(a.uuid),a.showEvents=!1,a.saved=!1,b.all().success(function(b){console.log(b),a.courses=b.courses,a.courses.forEach(function(a){a.exercise_groups.forEach(function(a){a.checked=!1})})}),a.click=function(a){a.stopPropagation()},a.addOrRemoveFromEvents=function(b,c){a.saved=!1,a.saveError=!1,a.saving=!0,console.log("Checked: "+c.checked),c.exercises.forEach(c.checked?function(d){d.name=b.name+" "+c.name,a.events[d.event_id]=d}:function(b){delete a.events[b.event_id]}),a.eventKeys=Object.keys(a.events),d.create(a.uuid,a.events).success(function(b,c,d,e){console.log(b),console.log(c),console.log(d),console.log(e),a.showEvents=!0,a.saving=!1,201==c?a.saved=!0:a.saveError=!0})}}]);var app=angular.module("massiveWallhackApp");app.factory("Courses",["$http",function(a){var b="http://mustached-wookie.herokuapp.com/courses.json",c={};return c.all=function(){return a.get(b)},c}]),app.factory("Calendar",["$http",function(a){function b(a){return c+a+".ics"}var c="http://petulant-batman.herokuapp.com/",d={};return d.create=function(b,d){var e={};return e.uid=b,e.events=[],Object.keys(d).forEach(function(a){var b={};b.start=d[a].start,b.length=d[a].length,b.name=d[a].name,b.place=d[a].place,e.events.push(b)}),console.log(JSON.stringify(e)),a.post(c+"event_lists.json",e)},d.get=function(c){return a.get(b(c))},d.getLink=function(a){return b(a)},d}]),app.factory("Uuid",function(){var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",b={};return b.generate=function(){return a.replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})},b});